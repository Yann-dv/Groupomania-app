{"version":3,"sources":["webpack:///./src/components/Profile.vue?e83e","webpack:///./src/components/Profile.vue","webpack:///./src/components/Profile.vue?022b"],"names":["class","role","type","data-bs-toggle","aria-expanded","id","aria-label","aria-labelledby","for","modifyProfile","currentUser","username","deleteProfile","userProfile","gender","lastname","firstname","birthday","email","handleModif","validation-schema","schema","successful","name","value","style","placeholder","disabled","loading","message","components","Footer","Form","Field","ErrorMessage","data","shape","max","matches","Date","required","min","password","computed","this","$store","state","auth","user","methods","userToDelete","confirm","deleteUser","then","removeUser","updateUser","error","response","toString","dispatch","setTimeout","window","location","reload","mounted","$router","push","getUserProfile","render"],"mappings":"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","file":"js/chunk-7fb4ec29.9cbc6178.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Profile.vue?vue&type=style&index=0&id=676be244&lang=css\"","<template>\r\n  <div class=\"container\"\r\n  v-if=\"!modifyProfile\">\r\n    <div class=\"row\">\r\n      <header class=\"jumbotron my-3\">\r\n        <h3>\r\n          Mon profil : <strong>{{ currentUser.username }}</strong>\r\n        </h3>\r\n      </header>\r\n      <div class=\"card rounded profile col-md-8 mx-auto col-12\">\r\n      <div class=\"card-header d-flex rounded\">\r\n        <div class=\"btn-group justify-content-end col-1\" role=\"group\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-secondary dropdown-toggle my-2\"\r\n              data-bs-toggle=\"dropdown\"\r\n              aria-expanded=\"false\"\r\n              id=\"btnGroupDropClose\"\r\n              aria-label=\"Close\"\r\n            ></button>\r\n              <ul class=\"dropdown-menu\" aria-labelledby=\"btnGroupDropClose\">\r\n              <li v-on:click=\"modifyProfile = true\" class=\"dropdown-item\">\r\n               Modifier mon profile\r\n              </li>\r\n              <li v-on:click=\"deleteProfile(currentUser.id)\" class=\"dropdown-item\">\r\n                Supprimer mon profil\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <p class=\"py-2\">\r\n          <strong>Nom d'utilisateur:</strong>\r\n          {{ userProfile.username }}\r\n        </p>\r\n        <p class=\"py-2\">\r\n          <strong>Genre:</strong>\r\n          {{ userProfile.gender }}\r\n        </p>\r\n        <p class=\"py-2\">\r\n          <strong>Nom :</strong>\r\n          {{ userProfile.lastname }}\r\n        </p>\r\n        <p class=\"py-2\">\r\n          <strong>Prénom :</strong>\r\n          {{ userProfile.firstname }}\r\n        </p>\r\n        <p class=\"py-2\">\r\n          <strong>Date de naissance :</strong>\r\n          {{ userProfile.birthday }}\r\n        </p>\r\n        <p class=\"py-3\">\r\n          <strong>Mon adresse email:</strong>\r\n          {{ userProfile.email }}\r\n        </p>\r\n        <p  type=\"password\" class=\"py-2\">\r\n          <strong>Mon mot de passe :</strong>\r\n          ************\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"col-md-12\"\r\n  v-if=\"modifyProfile\">\r\n    <div class=\"card card-container border-light\">\r\n      <Form @submit=\"handleModif\" :validation-schema=\"schema\" id=\"register-form\">\r\n        <div v-if=\"!successful\">\r\n        <div class=\"my-2 form-group gender-radios\">\r\n          <Field name=\"gender\" type=\"radio\" value=\"Homme\"></Field>\r\n          <label for=\"Homme\" class=\"fs-5 ms-1\">Homme</label>\r\n          <Field name=\"gender\" class=\"ms-2\" type=\"radio\" value=\"Femme\"></Field>\r\n          <label for=\"Femme\" class=\"fs-5 ms-1\">Femme</label>\r\n            <ErrorMessage name=\"gender\" class=\"error-feedback ms-3\" style=\"color:red\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"firstName\" class=\"fs-4 fw-bold\">Prénom :</label>\r\n          <Field name=\"firstname\" type=\"text\" class=\"form-control\" v-model=\"currentUser.firstname\"/>\r\n          <ErrorMessage name=\"firstname\" class=\"error-feedback\" style=\"color:red\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"lastName\" class=\"fs-4 fw-bold\">Nom :</label> \r\n          <Field name=\"lastname\" type=\"text\" class=\"form-control\" v-model=\"currentUser.lastname\"/>\r\n          <ErrorMessage name=\"lastname\" class=\"error-feedback\" style=\"color:red\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"birthday\" class=\"fs-4 fw-bold\">Date de naissance :</label> \r\n          <Field name=\"birthday\" type=\"text\" class=\"form-control\" v-model=\"currentUser.birthday\"/>\r\n          <ErrorMessage name=\"birthday\" class=\"error-feedback\" style=\"color:red\" />\r\n        </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"username\" class=\"fs-4 fw-bold\">Identifiant</label>\r\n            <Field name=\"username\" type=\"text\" class=\"form-control\" v-model=\"currentUser.username\" />\r\n            <ErrorMessage name=\"username\" class=\"error-feedback\" style=\"color:red\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"email\" class=\"fs-4 fw-bold\">Email</label>\r\n            <Field name=\"email\" type=\"email\" class=\"form-control\" v-model=\"currentUser.email\" />\r\n            <ErrorMessage name=\"email\" class=\"error-feedback\" style=\"color:red\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"password\" class=\"fs-4 fw-bold\">Mot de passe</label>\r\n            <Field name=\"password\" type=\"password\" class=\"form-control\" placeholder=\"******\" />\r\n            <ErrorMessage name=\"password\" class=\"error-feedback\" style=\"color:red\" />\r\n          </div>\r\n\r\n          <div class=\"form-group my-3\">\r\n            <button class=\"btn btn-primary btn-block\" :disabled=\"loading\">\r\n              <span\r\n                v-show=\"loading\"\r\n                class=\"spinner-border spinner-border-sm\"\r\n              ></span>\r\n              Modifier mon profil\r\n            </button>\r\n            <button id=\"cancel-btn\" class=\"mx-3 btn btn-secondary btn-block\"\r\n            v-on:click=\"modifyProfile= false\"\r\n            aria-label=\"Effacer ma saisie\" value=\"Effacer ma saisie\">Annuler</button>\r\n          </div>\r\n        </div>\r\n      </Form>\r\n\r\n      <div\r\n        v-if=\"message\"\r\n        class=\"alert\"\r\n        :class=\"successful ? 'alert-success' : 'alert-danger'\"\r\n      >\r\n        {{ message }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Footer />\r\n</template>\r\n\r\n<script>\r\nimport TokenService from \"../services/token.service\";\r\nimport UserService from \"../services/user-service\";\r\nimport Footer from \"../components/Footer\";\r\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\r\nimport * as yup from \"yup\";\r\n\r\nexport default {\r\n  name: \"Profile\",\r\n  components: {\r\n    Footer,\r\n    Form,\r\n    Field,\r\n    ErrorMessage,\r\n  },\r\n  data() {\r\n    const schema = yup.object().shape({\r\n      gender:yup\r\n      .string(),\r\n      //.required(\"Veuillez choisir une option\"),\r\n      firstname:yup\r\n        .string()\r\n        //.required(\"Veuillez entrer votre Nom\")\r\n        .max(50, \"Le nom ne doit pas dépasser 50 caractères!\")\r\n        .matches(/^[aA-zZ\\s]+$/, \r\n        \"Veuillez n'utiliser que des lettres.\"),\r\n      lastname:yup\r\n        .string()\r\n        //.required(\"Veuillez entrer votre Prénom\")\r\n        .max(50, \"Le nom ne doit pas dépasser 50 caractères!\")\r\n        .matches(/^[aA-zZ\\s]+$/, \r\n        \"Veuillez n'utiliser que des lettres.\"),\r\n      birthday:yup\r\n        .date()\r\n        .max(new Date(), \"Date impossible car située dans le futur\")\r\n        .required(\"Veuillez entrez une date au format AAAA-MM-JJ, ex: 1979-12-31\"),\r\n      username: yup\r\n        .string()\r\n        .required(\"Un identifiant est requis !\")\r\n        .min(3, \"L'identifiant doit contenir au moins 3 caractères!\")\r\n        .max(20, \"L'identifiant ne doit pas dépasser 20 caractères!\"),\r\n      email: yup\r\n        .string()\r\n        .required(\"Un email est requis !\")\r\n        .email(\"Email incorrect\")\r\n        .max(50, \"L'email ne doit pas dépasser 50 caractères!\"),\r\n      password: yup\r\n        .string()\r\n        .required(\"Un mot de passe est requis !\")\r\n        .min(6, \"Le mot de passe doit contenir au moins 6 caractères !\")\r\n        .max(40, \"L'email ne doit pas dépasser 50 caractères !\"),\r\n        //.matches(/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\r\n      //\"Le mot de passe doit contenir au moins 8 caractères, 1 lettre majuscule, 1 minuscule, 1 chiffre et 1 caractère spécial\"),\r\n    });\r\n    return {\r\n      userProfile: \"\",\r\n      modifyProfile:false,\r\n      successful: false,\r\n      loading: false,\r\n      message: \"\",\r\n      schema,\r\n    }\r\n  },\r\n  computed: {\r\n    currentUser() {\r\n      return this.$store.state.auth.user;\r\n    },\r\n  },\r\n  methods: {\r\n\r\n    deleteProfile(userToDelete) {\r\n      if (confirm(\"Souhaitez-vous vraiment supprimer ce message ?\")) {\r\n        UserService.deleteUser(userToDelete)\r\n        .then(() => TokenService.removeUser())\r\n      } else {\r\n        // Code à éxécuter si l'utilisateur clique sur \"Annuler\"\r\n      }\r\n    },\r\n\r\n    handleModif(user) {\r\n      this.message = \"\";\r\n      this.successful = false;\r\n      this.loading = true;\r\n\r\n      if (confirm(\"Souhaitez-vous vraiment modifier vos informations de profil ?\")) {\r\n        UserService.updateUser(user)\r\n        .then((data) => { \r\n          this.message = data.message;\r\n          this.successful = true;\r\n          this.loading = false;\r\n        },\r\n        (error) => {\r\n          this.message =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n          this.successful = false;\r\n          this.loading = false;\r\n        })\r\n      .then(() => {\r\n        this.$store.dispatch(\"auth/login\", user)      \r\n        })\r\n      .then(() => {\r\n            setTimeout(function(){\r\n            window.location.reload(1);\r\n          }, 400); \r\n      })\r\n      } else {\r\n        // Code à éxécuter si l'utilisateur clique sur \"Annuler\"\r\n        this.successful = false;\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n  },\r\n  mounted() {\r\n    if (!this.currentUser) {\r\n      this.$router.push(\"/home\");\r\n    }\r\n      \r\n      UserService.getUserProfile()\r\n      .then(\r\n        (response) => {\r\n        this.userProfile = response.data;\r\n        })\r\n      },\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n.dropdown-item {\r\n  cursor: pointer;\r\n}\r\n</style>","import { render } from \"./Profile.vue?vue&type=template&id=676be244\"\nimport script from \"./Profile.vue?vue&type=script&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&lang=js\"\n\nimport \"./Profile.vue?vue&type=style&index=0&id=676be244&lang=css\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}