(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fb4ec29"],{"139a":function(e,t,r){"use strict";r("9164")},"66aa":function(e,t,r){"use strict";r.r(t);var s=r("7a23"),a={key:0,class:"container"},o={class:"row"},c={class:"jumbotron my-3"},n=Object(s["j"])(" Mon profil : "),l={class:"card rounded profile col-md-8 mx-auto col-12"},i={class:"card-header d-flex rounded"},d={class:"btn-group justify-content-end col-1",role:"group"},u=Object(s["h"])("button",{type:"button",class:"btn btn-secondary dropdown-toggle my-2","data-bs-toggle":"dropdown","aria-expanded":"false",id:"btnGroupDropClose","aria-label":"Close"},null,-1),m={class:"dropdown-menu","aria-labelledby":"btnGroupDropClose"},b={class:"py-2"},f=Object(s["h"])("strong",null,"Nom d'utilisateur:",-1),j={class:"py-2"},O=Object(s["h"])("strong",null,"Genre:",-1),p={class:"py-2"},h=Object(s["h"])("strong",null,"Nom :",-1),g={class:"py-2"},y=Object(s["h"])("strong",null,"Prénom :",-1),k={class:"py-2"},v=Object(s["h"])("strong",null,"Date de naissance :",-1),w={class:"py-3"},U=Object(s["h"])("strong",null,"Mon adresse email:",-1),x=Object(s["h"])("p",{type:"password",class:"py-2"},[Object(s["h"])("strong",null,"Mon mot de passe :"),Object(s["j"])(" ************ ")],-1),P={key:1,class:"col-md-12"},V={class:"card card-container border-light"},M={key:0},H={class:"my-2 form-group gender-radios"},E=Object(s["h"])("label",{for:"Homme",class:"fs-5 ms-1"},"Homme",-1),q=Object(s["h"])("label",{for:"Femme",class:"fs-5 ms-1"},"Femme",-1),F={class:"form-group"},z=Object(s["h"])("label",{for:"firstName",class:"fs-4 fw-bold"},"Prénom :",-1),L={class:"form-group"},A=Object(s["h"])("label",{for:"lastName",class:"fs-4 fw-bold"},"Nom :",-1),C={class:"form-group"},D=Object(s["h"])("label",{for:"birthday",class:"fs-4 fw-bold"},"Date de naissance :",-1),S={class:"form-group"},N=Object(s["h"])("label",{for:"username",class:"fs-4 fw-bold"},"Identifiant",-1),$={class:"form-group"},J=Object(s["h"])("label",{for:"email",class:"fs-4 fw-bold"},"Email",-1),G={class:"form-group"},Z=Object(s["h"])("label",{for:"password",class:"fs-4 fw-bold"},"Mot de passe",-1),I={class:"form-group my-3"},T=["disabled"],_={class:"spinner-border spinner-border-sm"},B=Object(s["j"])(" Modifier mon profil ");function K(e,t,r,K,Q,R){var W=Object(s["E"])("Field"),X=Object(s["E"])("ErrorMessage"),Y=Object(s["E"])("Form"),ee=Object(s["E"])("Footer");return Object(s["x"])(),Object(s["g"])(s["a"],null,[Q.modifyProfile?Object(s["f"])("",!0):(Object(s["x"])(),Object(s["g"])("div",a,[Object(s["h"])("div",o,[Object(s["h"])("header",c,[Object(s["h"])("h3",null,[n,Object(s["h"])("strong",null,Object(s["H"])(R.currentUser.username),1)])]),Object(s["h"])("div",l,[Object(s["h"])("div",i,[Object(s["h"])("div",d,[u,Object(s["h"])("ul",m,[Object(s["h"])("li",{onClick:t[0]||(t[0]=function(e){return Q.modifyProfile=!0}),class:"dropdown-item"}," Modifier mon profile "),Object(s["h"])("li",{onClick:t[1]||(t[1]=function(e){return R.deleteProfile(R.currentUser.id)}),class:"dropdown-item"}," Supprimer mon profil ")])])]),Object(s["h"])("p",b,[f,Object(s["j"])(" "+Object(s["H"])(Q.userProfile.username),1)]),Object(s["h"])("p",j,[O,Object(s["j"])(" "+Object(s["H"])(Q.userProfile.gender),1)]),Object(s["h"])("p",p,[h,Object(s["j"])(" "+Object(s["H"])(Q.userProfile.lastname),1)]),Object(s["h"])("p",g,[y,Object(s["j"])(" "+Object(s["H"])(Q.userProfile.firstname),1)]),Object(s["h"])("p",k,[v,Object(s["j"])(" "+Object(s["H"])(Q.userProfile.birthday),1)]),Object(s["h"])("p",w,[U,Object(s["j"])(" "+Object(s["H"])(Q.userProfile.email),1)]),x])])])),Q.modifyProfile?(Object(s["x"])(),Object(s["g"])("div",P,[Object(s["h"])("div",V,[Object(s["k"])(Y,{onSubmit:R.handleModif,"validation-schema":Q.schema,id:"register-form"},{default:Object(s["O"])((function(){return[Q.successful?Object(s["f"])("",!0):(Object(s["x"])(),Object(s["g"])("div",M,[Object(s["h"])("div",H,[Object(s["k"])(W,{name:"gender",type:"radio",value:"Homme"}),E,Object(s["k"])(W,{name:"gender",class:"ms-2",type:"radio",value:"Femme"}),q,Object(s["k"])(X,{name:"gender",class:"error-feedback ms-3",style:{color:"red"}})]),Object(s["h"])("div",F,[z,Object(s["k"])(W,{name:"firstname",type:"text",class:"form-control",modelValue:R.currentUser.firstname,"onUpdate:modelValue":t[2]||(t[2]=function(e){return R.currentUser.firstname=e})},null,8,["modelValue"]),Object(s["k"])(X,{name:"firstname",class:"error-feedback",style:{color:"red"}})]),Object(s["h"])("div",L,[A,Object(s["k"])(W,{name:"lastname",type:"text",class:"form-control",modelValue:R.currentUser.lastname,"onUpdate:modelValue":t[3]||(t[3]=function(e){return R.currentUser.lastname=e})},null,8,["modelValue"]),Object(s["k"])(X,{name:"lastname",class:"error-feedback",style:{color:"red"}})]),Object(s["h"])("div",C,[D,Object(s["k"])(W,{name:"birthday",type:"text",class:"form-control",modelValue:R.currentUser.birthday,"onUpdate:modelValue":t[4]||(t[4]=function(e){return R.currentUser.birthday=e})},null,8,["modelValue"]),Object(s["k"])(X,{name:"birthday",class:"error-feedback",style:{color:"red"}})]),Object(s["h"])("div",S,[N,Object(s["k"])(W,{name:"username",type:"text",class:"form-control",modelValue:R.currentUser.username,"onUpdate:modelValue":t[5]||(t[5]=function(e){return R.currentUser.username=e})},null,8,["modelValue"]),Object(s["k"])(X,{name:"username",class:"error-feedback",style:{color:"red"}})]),Object(s["h"])("div",$,[J,Object(s["k"])(W,{name:"email",type:"email",class:"form-control",modelValue:R.currentUser.email,"onUpdate:modelValue":t[6]||(t[6]=function(e){return R.currentUser.email=e})},null,8,["modelValue"]),Object(s["k"])(X,{name:"email",class:"error-feedback",style:{color:"red"}})]),Object(s["h"])("div",G,[Z,Object(s["k"])(W,{name:"password",type:"password",class:"form-control",placeholder:"******"}),Object(s["k"])(X,{name:"password",class:"error-feedback",style:{color:"red"}})]),Object(s["h"])("div",I,[Object(s["h"])("button",{class:"btn btn-primary btn-block",disabled:Q.loading},[Object(s["P"])(Object(s["h"])("span",_,null,512),[[s["L"],Q.loading]]),B],8,T),Object(s["h"])("button",{id:"cancel-btn",class:"mx-3 btn btn-secondary btn-block",onClick:t[7]||(t[7]=function(e){return Q.modifyProfile=!1}),"aria-label":"Effacer ma saisie",value:"Effacer ma saisie"},"Annuler")])]))]})),_:1},8,["onSubmit","validation-schema"]),Q.message?(Object(s["x"])(),Object(s["g"])("div",{key:0,class:Object(s["r"])(["alert",Q.successful?"alert-success":"alert-danger"])},Object(s["H"])(Q.message),3)):Object(s["f"])("",!0)])])):Object(s["f"])("",!0),Object(s["k"])(ee)],64)}r("d3b7"),r("25f0");var Q=r("29bf"),R=r("2d82"),W=r("fd2d"),X=r("7bb1"),Y=r("506a"),ee={name:"Profile",components:{Footer:W["a"],Form:X["c"],Field:X["b"],ErrorMessage:X["a"]},data:function(){var e=Y["b"]().shape({gender:Y["c"](),firstname:Y["c"]().max(50,"Le nom ne doit pas dépasser 50 caractères!").matches(/^[aA-zZ\s]+$/,"Veuillez n'utiliser que des lettres."),lastname:Y["c"]().max(50,"Le nom ne doit pas dépasser 50 caractères!").matches(/^[aA-zZ\s]+$/,"Veuillez n'utiliser que des lettres."),birthday:Y["a"]().max(new Date,"Date impossible car située dans le futur").required("Veuillez entrez une date au format AAAA-MM-JJ, ex: 1979-12-31"),username:Y["c"]().required("Un identifiant est requis !").min(3,"L'identifiant doit contenir au moins 3 caractères!").max(20,"L'identifiant ne doit pas dépasser 20 caractères!"),email:Y["c"]().required("Un email est requis !").email("Email incorrect").max(50,"L'email ne doit pas dépasser 50 caractères!"),password:Y["c"]().required("Un mot de passe est requis !").min(6,"Le mot de passe doit contenir au moins 6 caractères !").max(40,"L'email ne doit pas dépasser 50 caractères !")});return{userProfile:"",modifyProfile:!1,successful:!1,loading:!1,message:"",schema:e}},computed:{currentUser:function(){return this.$store.state.auth.user}},methods:{deleteProfile:function(e){confirm("Souhaitez-vous vraiment supprimer ce message ?")&&R["a"].deleteUser(e).then((function(){return Q["a"].removeUser()}))},handleModif:function(e){var t=this;this.message="",this.successful=!1,this.loading=!0,confirm("Souhaitez-vous vraiment modifier vos informations de profil ?")?R["a"].updateUser(e).then((function(e){t.message=e.message,t.successful=!0,t.loading=!1}),(function(e){t.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),t.successful=!1,t.loading=!1})).then((function(){t.$store.dispatch("auth/login",e)})).then((function(){setTimeout((function(){window.location.reload(1)}),400)})):(this.successful=!1,this.loading=!1)}},mounted:function(){var e=this;this.currentUser||this.$router.push("/home"),R["a"].getUserProfile().then((function(t){e.userProfile=t.data}))}};r("139a");ee.render=K;t["default"]=ee},9164:function(e,t,r){}}]);
//# sourceMappingURL=chunk-7fb4ec29.9cbc6178.js.map